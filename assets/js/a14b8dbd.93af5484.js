"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[3121],{8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>t});var l=r(6540);const s={},i=l.createContext(s);function o(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),l.createElement(i.Provider,{value:n},e.children)}},8851:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"module-02-simulation/gazebo-intro","title":"Chapter 1: Gazebo Introduction","description":"What is Gazebo and Why Simulation?","source":"@site/docs/module-02-simulation/01-gazebo-intro.md","sourceDirName":"module-02-simulation","slug":"/module-02-simulation/gazebo-intro","permalink":"/physical-ai-textbook/docs/module-02-simulation/gazebo-intro","draft":false,"unlisted":false,"editUrl":"https://github.com/Zeenat-Somroo911/physical-ai-textbook/edit/main/docs/module-02-simulation/01-gazebo-intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Module 2: Simulation & Gazebo","permalink":"/physical-ai-textbook/docs/module-02-simulation/intro"},"next":{"title":"Chapter 2: URDF vs SDF","permalink":"/physical-ai-textbook/docs/module-02-simulation/urdf-sdf"}}');var s=r(4848),i=r(8453);const o={sidebar_position:1},t="Chapter 1: Gazebo Introduction",a={},d=[{value:"What is Gazebo and Why Simulation?",id:"what-is-gazebo-and-why-simulation",level:2},{value:"Why Use Simulation?",id:"why-use-simulation",level:3},{value:"Gazebo&#39;s Role in Robotics",id:"gazebos-role-in-robotics",level:3},{value:"Key Features of Gazebo",id:"key-features-of-gazebo",level:3},{value:"Installation on Ubuntu 22.04",id:"installation-on-ubuntu-2204",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Install ROS 2 Humble (if not already installed)",id:"install-ros-2-humble-if-not-already-installed",level:3},{value:"Install Gazebo",id:"install-gazebo",level:3},{value:"Install Additional Tools",id:"install-additional-tools",level:3},{value:"Verify Installation",id:"verify-installation",level:3},{value:"Common Installation Issues",id:"common-installation-issues",level:3},{value:"Interface Tour",id:"interface-tour",level:2},{value:"Main Window Components",id:"main-window-components",level:3},{value:"3D Scene View",id:"3d-scene-view",level:3},{value:"Left Panel: World/Models",id:"left-panel-worldmodels",level:3},{value:"Right Panel: Tools",id:"right-panel-tools",level:3},{value:"Bottom Panel: Controls",id:"bottom-panel-controls",level:3},{value:"Keyboard Shortcuts",id:"keyboard-shortcuts",level:3},{value:"First Simulation Example",id:"first-simulation-example",level:2},{value:"Step 1: Launch Gazebo",id:"step-1-launch-gazebo",level:3},{value:"Step 2: Insert a Model",id:"step-2-insert-a-model",level:3},{value:"Step 3: Add a Simple Robot",id:"step-3-add-a-simple-robot",level:3},{value:"Step 4: Create a Simple URDF",id:"step-4-create-a-simple-urdf",level:3},{value:"Step 5: Spawn Robot in Gazebo",id:"step-5-spawn-robot-in-gazebo",level:3},{value:"Step 6: Add Physics",id:"step-6-add-physics",level:3},{value:"Step 7: Control the Robot",id:"step-7-control-the-robot",level:3},{value:"World Files and Models",id:"world-files-and-models",level:2},{value:"Understanding World Files",id:"understanding-world-files",level:3},{value:"Creating a Custom World",id:"creating-a-custom-world",level:3},{value:"Launching Custom World",id:"launching-custom-world",level:3},{value:"Model Structure",id:"model-structure",level:3},{value:"Creating a Simple Model",id:"creating-a-simple-model",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"Pitfall 1: Missing Inertial Properties",id:"pitfall-1-missing-inertial-properties",level:3},{value:"Pitfall 2: Complex Collision Geometry",id:"pitfall-2-complex-collision-geometry",level:3},{value:"Pitfall 3: Wrong Coordinate Frames",id:"pitfall-3-wrong-coordinate-frames",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"chapter-1-gazebo-introduction",children:"Chapter 1: Gazebo Introduction"})}),"\n",(0,s.jsx)(n.h2,{id:"what-is-gazebo-and-why-simulation",children:"What is Gazebo and Why Simulation?"}),"\n",(0,s.jsx)(n.p,{children:"Gazebo is a powerful 3D physics simulator that enables you to test robots in realistic virtual environments before deploying to real hardware. It's one of the most widely used simulation tools in robotics, providing a safe, cost-effective way to develop, test, and validate robotic systems."}),"\n",(0,s.jsx)(n.h3,{id:"why-use-simulation",children:"Why Use Simulation?"}),"\n",(0,s.jsx)(n.p,{children:"Simulation offers numerous advantages over working directly with hardware:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cost-Effective"}),": No need for expensive robots during development"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Safe Testing"}),": Test dangerous scenarios without risk"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rapid Iteration"}),": Faster development cycles"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reproducible"}),": Same conditions every time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Scalable"}),": Test with multiple robots simultaneously"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Debugging"}),": Easier to inspect and debug systems"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Training"}),": Generate synthetic data for machine learning"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"gazebos-role-in-robotics",children:"Gazebo's Role in Robotics"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph TB\r\n    A[Robot Development] --\x3e B{Simulation First?}\r\n    B --\x3e|Yes| C[Gazebo Testing]\r\n    B --\x3e|No| D[Hardware Testing]\r\n    C --\x3e E[Validate in Simulation]\r\n    E --\x3e F{Success?}\r\n    F --\x3e|Yes| D\r\n    F --\x3e|No| G[Iterate in Simulation]\r\n    G --\x3e C\r\n    D --\x3e H[Deploy to Real Robot]\r\n    \r\n    style C fill:#c8e6c9\r\n    style E fill:#fff9c4\r\n    style H fill:#ffccbc\n"})}),"\n",(0,s.jsx)(n.h3,{id:"key-features-of-gazebo",children:"Key Features of Gazebo"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Physics Simulation"}),": Realistic dynamics using ODE, Bullet, or Simbody"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sensor Simulation"}),": Cameras, LiDAR, IMU, force/torque sensors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"3D Rendering"}),": High-quality visualization with OGRE"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plugin System"}),": Extensible architecture"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ROS Integration"}),": Seamless connection with ROS 2"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Model Library"}),": Extensive collection of pre-built models"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation-on-ubuntu-2204",children:"Installation on Ubuntu 22.04"}),"\n",(0,s.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Update system\r\nsudo apt update && sudo apt upgrade -y\r\n\r\n# Install basic dependencies\r\nsudo apt install -y \\\r\n    lsb-release \\\r\n    wget \\\r\n    gnupg \\\r\n    software-properties-common\n"})}),"\n",(0,s.jsx)(n.h3,{id:"install-ros-2-humble-if-not-already-installed",children:"Install ROS 2 Humble (if not already installed)"}),"\n",(0,s.jsx)(n.p,{children:"Gazebo works best with ROS 2. If you haven't installed ROS 2 Humble:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Add ROS 2 repository\r\nsudo apt install software-properties-common\r\nsudo add-apt-repository universe\r\nsudo apt update && sudo apt install curl -y\r\n\r\n# Add ROS 2 GPG key\r\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -\r\n\r\n# Add ROS 2 repository\r\nsudo sh -c 'echo \"deb [arch=$(dpkg --print-architecture)] http://packages.ros.org/ros2/ubuntu $(lsb_release -cs) main\" > /etc/apt/sources.list.d/ros2-latest.list'\r\n\r\n# Install ROS 2\r\nsudo apt update\r\nsudo apt install ros-humble-desktop -y\n"})}),"\n",(0,s.jsx)(n.h3,{id:"install-gazebo",children:"Install Gazebo"}),"\n",(0,s.jsx)(n.p,{children:"Gazebo comes in different versions. For ROS 2 Humble, we'll use Gazebo Classic (Gazebo 11):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install Gazebo Classic\r\nsudo apt install -y \\\r\n    gazebo11 \\\r\n    libgazebo11-dev \\\r\n    gazebo11-plugin-base \\\r\n    libgazebo11-plugin-base\r\n\r\n# Install ROS 2 Gazebo packages\r\nsudo apt install -y \\\r\n    ros-humble-gazebo-ros-pkgs \\\r\n    ros-humble-gazebo-plugins \\\r\n    ros-humble-gazebo-ros\n"})}),"\n",(0,s.jsx)(n.h3,{id:"install-additional-tools",children:"Install Additional Tools"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install Gazebo models (optional but recommended)\r\ncd ~\r\ngit clone https://github.com/osrf/gazebo_models.git\r\nmkdir -p ~/.gazebo/models\r\ncp -r gazebo_models/* ~/.gazebo/models/\r\n\r\n# Install development tools\r\nsudo apt install -y \\\r\n    python3-pip \\\r\n    python3-colcon-common-extensions\n"})}),"\n",(0,s.jsx)(n.h3,{id:"verify-installation",children:"Verify Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Test Gazebo\r\ngazebo --version\r\n# Should output: gazebo11\r\n\r\n# Test ROS 2 integration\r\nsource /opt/ros/humble/setup.bash\r\nros2 run gazebo_ros gazebo\n"})}),"\n",(0,s.jsx)(n.h3,{id:"common-installation-issues",children:"Common Installation Issues"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Issue 1: Gazebo won't start (display errors)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Solution: Set display (for headless systems)\r\nexport DISPLAY=:0\r\n# Or install virtual display\r\nsudo apt install xvfb\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Issue 2: Missing models"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Solution: Set model path\r\nexport GAZEBO_MODEL_PATH=$HOME/.gazebo/models:$GAZEBO_MODEL_PATH\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Issue 3: Permission errors"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Solution: Fix permissions\r\nsudo chown -R $USER:$USER ~/.gazebo\n"})}),"\n",(0,s.jsx)(n.h2,{id:"interface-tour",children:"Interface Tour"}),"\n",(0,s.jsx)(n.p,{children:"When you launch Gazebo, you'll see a comprehensive interface with multiple panels and tools."}),"\n",(0,s.jsx)(n.h3,{id:"main-window-components",children:"Main Window Components"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph TB\r\n    A[Gazebo Interface] --\x3e B[3D Scene View]\r\n    A --\x3e C[Left Panel]\r\n    A --\x3e D[Right Panel]\r\n    A --\x3e E[Bottom Panel]\r\n    \r\n    C --\x3e C1[World]\r\n    C --\x3e C2[Models]\r\n    C --\x3e C3[Layers]\r\n    \r\n    D --\x3e D1[Insert Tab]\r\n    D --\x3e D2[Physics]\r\n    D --\x3e D3[Rendering]\r\n    \r\n    E --\x3e E1[Play/Pause]\r\n    E --\x3e E2[Step]\r\n    E --\x3e E3[Reset]\r\n    E --\x3e E4[Log Messages]\r\n    \r\n    style A fill:#e1f5ff\r\n    style B fill:#b3e5fc\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3d-scene-view",children:"3D Scene View"}),"\n",(0,s.jsx)(n.p,{children:"The main 3D viewport where you see your simulation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Navigation"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Left-click + drag: Rotate view"}),"\n",(0,s.jsx)(n.li,{children:"Middle-click + drag: Pan view"}),"\n",(0,s.jsx)(n.li,{children:"Scroll: Zoom in/out"}),"\n",(0,s.jsx)(n.li,{children:"Right-click: Context menu"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Selection"}),": Click objects to select them"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Grid"}),": Ground plane for reference"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"left-panel-worldmodels",children:"Left Panel: World/Models"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"World Tab"}),": Shows world hierarchy","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Models in the scene"}),"\n",(0,s.jsx)(n.li,{children:"Links and joints"}),"\n",(0,s.jsx)(n.li,{children:"Properties"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Models Tab"}),": Available models to insert","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Search functionality"}),"\n",(0,s.jsx)(n.li,{children:"Categories (robots, objects, etc.)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"right-panel-tools",children:"Right Panel: Tools"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Insert Tab"}),": Drag models into scene"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Physics Tab"}),": Physics engine settings"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rendering Tab"}),": Graphics settings"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Scene Tab"}),": Scene properties"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"bottom-panel-controls",children:"Bottom Panel: Controls"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Play/Pause"}),": Start/stop simulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Step"}),": Advance one simulation step"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reset"}),": Reset simulation to initial state"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Factor"}),": Shows simulation speed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Log Messages"}),": Error and info messages"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"keyboard-shortcuts",children:"Keyboard Shortcuts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Space"}),": Play/Pause"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl+R"}),": Reset simulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl+Q"}),": Quit Gazebo"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl+N"}),": New world"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl+O"}),": Open world"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl+S"}),": Save world"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"first-simulation-example",children:"First Simulation Example"}),"\n",(0,s.jsx)(n.p,{children:"Let's create your first simulation with a simple robot."}),"\n",(0,s.jsx)(n.h3,{id:"step-1-launch-gazebo",children:"Step 1: Launch Gazebo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Launch empty world\r\ngazebo\r\n\r\n# Or with ROS 2\r\nros2 launch gazebo_ros gazebo.launch.py\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-insert-a-model",children:"Step 2: Insert a Model"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Click the ",(0,s.jsx)(n.strong,{children:"Insert"})," tab in the right panel"]}),"\n",(0,s.jsxs)(n.li,{children:["Find ",(0,s.jsx)(n.strong,{children:"Ground Plane"})," in the list"]}),"\n",(0,s.jsx)(n.li,{children:"Drag it into the scene (or click to place at origin)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-add-a-simple-robot",children:"Step 3: Add a Simple Robot"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"Insert"}),' tab, search for "box"']}),"\n",(0,s.jsxs)(n.li,{children:["Drag a ",(0,s.jsx)(n.strong,{children:"Box"})," into the scene"]}),"\n",(0,s.jsx)(n.li,{children:"Position it above the ground plane"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-4-create-a-simple-urdf",children:"Step 4: Create a Simple URDF"}),"\n",(0,s.jsxs)(n.p,{children:["Create a file ",(0,s.jsx)(n.code,{children:"simple_robot.urdf"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="simple_robot">\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.5 0.5 0.5"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.5 0.5 0.5"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.1" ixy="0" ixz="0"\r\n               iyy="0.1" iyz="0" izz="0.1"/>\r\n    </inertial>\r\n  </link>\r\n</robot>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-5-spawn-robot-in-gazebo",children:"Step 5: Spawn Robot in Gazebo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# In a new terminal\r\nsource /opt/ros/humble/setup.bash\r\n\r\n# Spawn robot\r\nros2 run gazebo_ros spawn_entity.py \\\r\n    -entity simple_robot \\\r\n    -file $(pwd)/simple_robot.urdf \\\r\n    -x 0 -y 0 -z 1.0\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-6-add-physics",children:"Step 6: Add Physics"}),"\n",(0,s.jsx)(n.p,{children:"The robot should fall due to gravity. You'll see it drop and settle on the ground plane."}),"\n",(0,s.jsx)(n.h3,{id:"step-7-control-the-robot",children:"Step 7: Control the Robot"}),"\n",(0,s.jsxs)(n.p,{children:["Create a simple controller node ",(0,s.jsx)(n.code,{children:"robot_controller.py"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nSimple Robot Controller\r\n\r\nApplies force to move the robot.\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Wrench\r\nfrom gazebo_msgs.srv import ApplyBodyWrench\r\n\r\nclass SimpleController(Node):\r\n    def __init__(self):\r\n        super().__init__('simple_controller')\r\n        \r\n        # Create service client\r\n        self.client = self.create_client(\r\n            ApplyBodyWrench,\r\n            '/apply_body_wrench'\r\n        )\r\n        \r\n        # Wait for service\r\n        while not self.client.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('Waiting for service...')\r\n        \r\n        # Timer to apply force\r\n        self.timer = self.create_timer(0.1, self.apply_force)\r\n    \r\n    def apply_force(self):\r\n        request = ApplyBodyWrench.Request()\r\n        request.body_name = 'simple_robot::base_link'\r\n        request.reference_frame = 'world'\r\n        request.wrench.force.x = 1.0  # Push forward\r\n        request.duration.sec = 0.1\r\n        \r\n        future = self.client.call_async(request)\r\n        rclpy.spin_until_future_complete(self, future)\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    controller = SimpleController()\r\n    rclpy.spin(controller)\r\n    controller.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"world-files-and-models",children:"World Files and Models"}),"\n",(0,s.jsx)(n.h3,{id:"understanding-world-files",children:"Understanding World Files"}),"\n",(0,s.jsxs)(n.p,{children:["World files (",(0,s.jsx)(n.code,{children:".world"}),") define the simulation environment:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<sdf version="1.6">\r\n  <world name="my_world">\r\n    \x3c!-- Physics settings --\x3e\r\n    <physics type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n    </physics>\r\n    \r\n    \x3c!-- Scene settings --\x3e\r\n    <scene>\r\n      <ambient>0.4 0.4 0.4 1</ambient>\r\n      <background>0.7 0.7 0.7 1</background>\r\n    </scene>\r\n    \r\n    \x3c!-- Include models --\x3e\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n    \r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n    \r\n    \x3c!-- Custom models --\x3e\r\n    <model name="my_robot">\r\n      \x3c!-- Model definition --\x3e\r\n    </model>\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-custom-world",children:"Creating a Custom World"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"my_world.world"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<sdf version="1.6">\r\n  <world name="test_world">\r\n    <physics type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n      <real_time_update_rate>1000</real_time_update_rate>\r\n    </physics>\r\n    \r\n    <scene>\r\n      <ambient>0.4 0.4 0.4 1</ambient>\r\n      <background>0.7 0.7 0.7 1</background>\r\n      <shadows>true</shadows>\r\n    </scene>\r\n    \r\n    \x3c!-- Ground plane --\x3e\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n    \r\n    \x3c!-- Lighting --\x3e\r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n    \r\n    \x3c!-- Obstacles --\x3e\r\n    <model name="box1">\r\n      <pose>2 0 0.5 0 0 0</pose>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>1 1 1</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>1 1 1</size>\r\n            </box>\r\n          </geometry>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"launching-custom-world",children:"Launching Custom World"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Launch world file\r\ngazebo my_world.world\r\n\r\n# Or with ROS 2\r\nros2 launch gazebo_ros gazebo.launch.py world:=my_world.world\n"})}),"\n",(0,s.jsx)(n.h3,{id:"model-structure",children:"Model Structure"}),"\n",(0,s.jsx)(n.p,{children:"Gazebo models are organized in directories:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"~/.gazebo/models/\r\n  my_model/\r\n    model.config      # Model metadata\r\n    model.sdf         # Model definition\r\n    meshes/           # 3D meshes (optional)\r\n      model.dae\r\n    materials/        # Textures (optional)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-simple-model",children:"Creating a Simple Model"}),"\n",(0,s.jsx)(n.p,{children:"Create directory structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/.gazebo/models/my_box\r\ncd ~/.gazebo/models/my_box\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"model.config"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<model>\r\n  <name>My Box</name>\r\n  <version>1.0</version>\r\n  <sdf version="1.6">model.sdf</sdf>\r\n  <author>\r\n    <name>Your Name</name>\r\n    <email>your.email@example.com</email>\r\n  </author>\r\n  <description>\r\n    A simple box model for testing\r\n  </description>\r\n</model>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"model.sdf"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<sdf version="1.6">\r\n  <model name="my_box">\r\n    <pose>0 0 0.5 0 0 0</pose>\r\n    <static>false</static>\r\n    <link name="link">\r\n      <collision name="collision">\r\n        <geometry>\r\n          <box>\r\n            <size>1 1 1</size>\r\n          </box>\r\n        </geometry>\r\n      </collision>\r\n      <visual name="visual">\r\n        <geometry>\r\n          <box>\r\n            <size>1 1 1</size>\r\n          </box>\r\n        </geometry>\r\n        <material>\r\n          <script>\r\n            <name>Gazebo/Red</name>\r\n            <uri>file://media/materials/scripts/gazebo.material</uri>\r\n          <\/script>\r\n        </material>\r\n      </visual>\r\n      <inertial>\r\n        <mass>1.0</mass>\r\n        <inertia>\r\n          <ixx>0.1</ixx>\r\n          <iyy>0.1</iyy>\r\n          <izz>0.1</izz>\r\n        </inertia>\r\n      </inertial>\r\n    </link>\r\n  </model>\r\n</sdf>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Now your model appears in the Insert tab!"}),"\n",(0,s.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,s.jsx)(n.h3,{id:"pitfall-1-missing-inertial-properties",children:"Pitfall 1: Missing Inertial Properties"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Model doesn't respond to physics."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Always include inertial properties:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<inertial>\r\n  <mass value="1.0"/>\r\n  <inertia ixx="0.1" ixy="0" ixz="0"\r\n           iyy="0.1" iyz="0" izz="0.1"/>\r\n</inertial>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"pitfall-2-complex-collision-geometry",children:"Pitfall 2: Complex Collision Geometry"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Simulation runs slowly."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Use simple collision shapes:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Good: Simple box --\x3e\r\n<collision>\r\n  <geometry>\r\n    <box size="1 1 1"/>\r\n  </geometry>\r\n</collision>\r\n\r\n\x3c!-- Bad: Complex mesh --\x3e\r\n<collision>\r\n  <geometry>\r\n    <mesh filename="complex_model.dae"/>\r\n  </geometry>\r\n</collision>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"pitfall-3-wrong-coordinate-frames",children:"Pitfall 3: Wrong Coordinate Frames"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Robot spawns in wrong position."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Check pose and origin tags:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<pose>x y z roll pitch yaw</pose>\r\n<origin xyz="x y z" rpy="roll pitch yaw"/>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"Now that you understand Gazebo basics, continue to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/physical-ai-textbook/docs/module-02-simulation/urdf-sdf",children:"Chapter 2: URDF vs SDF"})," - Learn about robot description formats"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/physical-ai-textbook/docs/module-02-simulation/physics-simulation",children:"Chapter 3: Physics Simulation"})," - Master physics engines"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);