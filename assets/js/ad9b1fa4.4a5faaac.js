"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[3839],{6831:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"module-03-isaac/navigation","title":"Chapter 5: Navigation with Nav2","description":"Introduction","source":"@site/docs/module-03-isaac/05-navigation.md","sourceDirName":"module-03-isaac","slug":"/module-03-isaac/navigation","permalink":"/physical-ai-textbook/docs/module-03-isaac/navigation","draft":false,"unlisted":false,"editUrl":"https://github.com/Zeenat-Somroo911/physical-ai-textbook/edit/main/docs/module-03-isaac/05-navigation.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 4: SLAM Basics","permalink":"/physical-ai-textbook/docs/module-03-isaac/slam-basics"},"next":{"title":"Chapter 6: Complete Perception Pipeline","permalink":"/physical-ai-textbook/docs/module-03-isaac/perception-pipeline"}}');var o=r(4848),t=r(8453);const i={sidebar_position:5},l="Chapter 5: Navigation with Nav2",s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Why Nav2?",id:"why-nav2",level:3},{value:"Installation",id:"installation",level:2},{value:"Install Nav2",id:"install-nav2",level:3},{value:"Verify Installation",id:"verify-installation",level:3},{value:"Nav2 Architecture",id:"nav2-architecture",level:2},{value:"Path Planning Algorithms",id:"path-planning-algorithms",level:2},{value:"Global Planners",id:"global-planners",level:3},{value:"Local Planners",id:"local-planners",level:3},{value:"Configuring Planners",id:"configuring-planners",level:3},{value:"Costmap Configuration",id:"costmap-configuration",level:2},{value:"Global Costmap",id:"global-costmap",level:3},{value:"Local Costmap",id:"local-costmap",level:3},{value:"Complete Nav2 Setup",id:"complete-nav2-setup",level:2},{value:"Launch File",id:"launch-file",level:3},{value:"Basic Navigation Node",id:"basic-navigation-node",level:3},{value:"Waypoint Navigation",id:"waypoint-navigation",level:2},{value:"Following Waypoints",id:"following-waypoints",level:3},{value:"Complete Navigation Example",id:"complete-navigation-example",level:2},{value:"Full System",id:"full-system",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Errors and Solutions",id:"common-errors-and-solutions",level:2},{value:"Error 1: &quot;Nav2 server not found&quot;",id:"error-1-nav2-server-not-found",level:3},{value:"Error 2: &quot;Goal rejected&quot;",id:"error-2-goal-rejected",level:3},{value:"Error 3: &quot;Robot stuck&quot;",id:"error-3-robot-stuck",level:3},{value:"Next Steps",id:"next-steps",level:2}];function p(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"chapter-5-navigation-with-nav2",children:"Chapter 5: Navigation with Nav2"})}),"\n",(0,o.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsx)(e.p,{children:"Nav2 (Navigation 2) is the ROS 2 navigation stack, providing path planning, obstacle avoidance, and autonomous navigation capabilities. It's completely free, open-source, and production-ready."}),"\n",(0,o.jsx)(e.h3,{id:"why-nav2",children:"Why Nav2?"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Free"}),": Part of ROS 2 ecosystem"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Production-Ready"}),": Used in industry"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Flexible"}),": Highly configurable"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Well-Maintained"}),": Active development"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"No Hardware Requirements"}),": Software-only"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(e.h3,{id:"install-nav2",children:"Install Nav2"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Install Nav2 packages\r\nsudo apt install ros-humble-navigation2 \\\r\n                 ros-humble-nav2-bringup \\\r\n                 ros-humble-nav2-common \\\r\n                 ros-humble-nav2-msgs \\\r\n                 ros-humble-nav2-util\r\n\r\n# Install additional plugins\r\nsudo apt install ros-humble-nav2-plugins\n"})}),"\n",(0,o.jsx)(e.h3,{id:"verify-installation",children:"Verify Installation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Check Nav2 packages\r\nros2 pkg list | grep nav2\r\n\r\n# Test installation\r\nros2 run nav2_bringup bringup\n"})}),"\n",(0,o.jsx)(e.h2,{id:"nav2-architecture",children:"Nav2 Architecture"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-mermaid",children:"graph TB\r\n    A[Nav2 Stack] --\x3e B[Planner]\r\n    A --\x3e C[Controller]\r\n    A --\x3e D[Recovery]\r\n    A --\x3e E[Behavior Tree]\r\n    \r\n    B --\x3e B1[Global Planner]\r\n    B --\x3e B2[Local Planner]\r\n    \r\n    C --\x3e C1[Path Following]\r\n    C --\x3e C2[Obstacle Avoidance]\r\n    \r\n    D --\x3e D1[Spin Recovery]\r\n    D --\x3e D2[Backup Recovery]\r\n    \r\n    E --\x3e E1[Task Execution]\r\n    E --\x3e E2[Error Handling]\r\n    \r\n    style A fill:#e1f5ff\r\n    style B fill:#c8e6c9\r\n    style C fill:#fff9c4\n"})}),"\n",(0,o.jsx)(e.h2,{id:"path-planning-algorithms",children:"Path Planning Algorithms"}),"\n",(0,o.jsx)(e.h3,{id:"global-planners",children:"Global Planners"}),"\n",(0,o.jsx)(e.p,{children:"Nav2 supports multiple global path planning algorithms:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"NavFn"}),": Default A* based planner"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Theta"}),"*: Any-angle path planner"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Smac Planner"}),": State Lattice planner"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Planner Server"}),": Plugin-based system"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"local-planners",children:"Local Planners"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"DWB (Dynamic Window Approach)"}),": Default local planner"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"TEB (Timed Elastic Band)"}),": Optimization-based"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"MPPI (Model Predictive Path Integral)"}),": Sampling-based"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"configuring-planners",children:"Configuring Planners"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'# nav2_params.yaml\r\nplanner_server:\r\n  ros__parameters:\r\n    planner_plugins: ["GridBased"]\r\n    GridBased:\r\n      plugin: "nav2_navfn_planner/NavfnPlanner"\r\n      tolerance: 0.5\r\n      use_astar: false\r\n      allow_unknown: true\r\n\r\ncontroller_server:\r\n  ros__parameters:\r\n    controller_frequency: 20.0\r\n    min_x_velocity_threshold: 0.001\r\n    min_y_velocity_threshold: 0.5\r\n    min_theta_velocity_threshold: 0.001\r\n    failure_tolerance: 0.3\r\n    progress_checker_plugin: "progress_checker"\r\n    goal_checker_plugins: ["general_goal_checker"]\r\n    controller_plugins: ["FollowPath"]\r\n    \r\n    FollowPath:\r\n      plugin: "dwb_core::DWBLocalPlanner"\r\n      debug_trajectory_details: True\r\n      min_vel_x: 0.0\r\n      min_vel_y: 0.0\r\n      max_vel_x: 0.26\r\n      max_vel_y: 0.0\r\n      max_vel_theta: 1.0\r\n      min_speed_xy: 0.0\r\n      max_speed_xy: 0.26\r\n      min_speed_theta: 0.0\r\n      acc_lim_x: 2.5\r\n      acc_lim_y: 0.0\r\n      acc_lim_theta: 3.2\r\n      decel_lim_x: -2.5\r\n      decel_lim_y: 0.0\r\n      decel_lim_theta: -3.2\n'})}),"\n",(0,o.jsx)(e.h2,{id:"costmap-configuration",children:"Costmap Configuration"}),"\n",(0,o.jsx)(e.p,{children:"Costmaps define obstacles and free space for navigation."}),"\n",(0,o.jsx)(e.h3,{id:"global-costmap",children:"Global Costmap"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'global_costmap:\r\n  global_costmap:\r\n    ros__parameters:\r\n      global_frame: map\r\n      robot_base_frame: base_link\r\n      update_frequency: 1.0\r\n      publish_frequency: 1.0\r\n      static_map: true\r\n      rolling_window: false\r\n      width: 10\r\n      height: 10\r\n      resolution: 0.05\r\n      plugins: ["static_layer", "obstacle_layer", "inflation_layer"]\r\n      inflation_layer:\r\n        plugin: "nav2_costmap_2d::InflationLayer"\r\n        cost_scaling_factor: 3.0\r\n        inflation_radius: 0.55\r\n      static_layer:\r\n        plugin: "nav2_costmap_2d::StaticLayer"\r\n      obstacle_layer:\r\n        plugin: "nav2_costmap_2d::ObstacleLayer"\r\n        observation_sources: scan\r\n        scan:\r\n          topic: /scan\r\n          max_obstacle_height: 2.0\r\n          clearing: true\r\n          marking: true\n'})}),"\n",(0,o.jsx)(e.h3,{id:"local-costmap",children:"Local Costmap"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'local_costmap:\r\n  local_costmap:\r\n    ros__parameters:\r\n      global_frame: odom\r\n      robot_base_frame: base_link\r\n      update_frequency: 5.0\r\n      publish_frequency: 2.0\r\n      width: 3\r\n      height: 3\r\n      resolution: 0.05\r\n      rolling_window: true\r\n      plugins: ["obstacle_layer", "inflation_layer"]\r\n      obstacle_layer:\r\n        plugin: "nav2_costmap_2d::ObstacleLayer"\r\n        observation_sources: scan\r\n        scan:\r\n          topic: /scan\r\n          max_obstacle_height: 2.0\r\n          clearing: true\r\n          marking: true\r\n      inflation_layer:\r\n        plugin: "nav2_costmap_2d::InflationLayer"\r\n        cost_scaling_factor: 3.0\r\n        inflation_radius: 0.55\n'})}),"\n",(0,o.jsx)(e.h2,{id:"complete-nav2-setup",children:"Complete Nav2 Setup"}),"\n",(0,o.jsx)(e.h3,{id:"launch-file",children:"Launch File"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nNav2 Launch File\r\n\r\nComplete Nav2 setup with all components.\r\n\"\"\"\r\n\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\nimport os\r\nfrom ament_index_python.packages import get_package_share_directory\r\n\r\ndef generate_launch_description():\r\n    # Get package directory\r\n    nav2_bringup_dir = get_package_share_directory('nav2_bringup')\r\n    \r\n    # Parameters\r\n    params_file = os.path.join(nav2_bringup_dir, 'params', 'nav2_params.yaml')\r\n    \r\n    return LaunchDescription([\r\n        # Declare arguments\r\n        DeclareLaunchArgument(\r\n            'use_sim_time',\r\n            default_value='false',\r\n            description='Use simulation time'\r\n        ),\r\n        \r\n        # Nav2 Bringup\r\n        Node(\r\n            package='nav2_bringup',\r\n            executable='bringup',\r\n            name='nav2_bringup',\r\n            parameters=[params_file],\r\n            output='screen'\r\n        ),\r\n        \r\n        # Lifecycle Manager\r\n        Node(\r\n            package='nav2_lifecycle_manager',\r\n            executable='lifecycle_manager',\r\n            name='lifecycle_manager',\r\n            parameters=[{\r\n                'use_sim_time': LaunchConfiguration('use_sim_time'),\r\n                'autostart': True,\r\n                'node_names': [\r\n                    'map_server',\r\n                    'amcl',\r\n                    'controller_server',\r\n                    'planner_server',\r\n                    'recoveries_server',\r\n                    'bt_navigator',\r\n                    'waypoint_follower'\r\n                ]\r\n            }],\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,o.jsx)(e.h3,{id:"basic-navigation-node",children:"Basic Navigation Node"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nBasic Navigation Node\r\n\r\nSend goals to Nav2 and monitor navigation.\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import PoseStamped\r\nfrom nav2_msgs.action import NavigateToPose\r\nfrom rclpy.action import ActionClient\r\nimport math\r\n\r\nclass NavigationNode(Node):\r\n    def __init__(self):\r\n        super().__init__('navigation_node')\r\n        \r\n        # Create action client\r\n        self.nav_to_pose_client = ActionClient(\r\n            self,\r\n            NavigateToPose,\r\n            'navigate_to_pose'\r\n        )\r\n        \r\n        # Wait for server\r\n        self.get_logger().info('Waiting for Nav2 server...')\r\n        self.nav_to_pose_client.wait_for_server()\r\n        self.get_logger().info('Nav2 server ready')\r\n    \r\n    def navigate_to_pose(self, x, y, theta):\r\n        \"\"\"\r\n        Navigate to a pose.\r\n        \r\n        Args:\r\n            x: X position (meters)\r\n            y: Y position (meters)\r\n            theta: Orientation (radians)\r\n        \"\"\"\r\n        # Create goal\r\n        goal_msg = NavigateToPose.Goal()\r\n        goal_msg.pose.header.frame_id = 'map'\r\n        goal_msg.pose.header.stamp = self.get_clock().now().to_msg()\r\n        \r\n        goal_msg.pose.pose.position.x = x\r\n        goal_msg.pose.pose.position.y = y\r\n        goal_msg.pose.pose.position.z = 0.0\r\n        \r\n        # Convert theta to quaternion\r\n        goal_msg.pose.pose.orientation.z = math.sin(theta / 2.0)\r\n        goal_msg.pose.pose.orientation.w = math.cos(theta / 2.0)\r\n        \r\n        # Send goal\r\n        self.get_logger().info(f'Sending goal: ({x}, {y}, {theta})')\r\n        send_goal_future = self.nav_to_pose_client.send_goal_async(\r\n            goal_msg,\r\n            feedback_callback=self.feedback_callback\r\n        )\r\n        \r\n        rclpy.spin_until_future_complete(self, send_goal_future)\r\n        goal_handle = send_goal_future.result()\r\n        \r\n        if not goal_handle.accepted:\r\n            self.get_logger().error('Goal rejected')\r\n            return\r\n        \r\n        self.get_logger().info('Goal accepted')\r\n        \r\n        # Wait for result\r\n        result_future = goal_handle.get_result_async()\r\n        rclpy.spin_until_future_complete(self, result_future)\r\n        \r\n        result = result_future.result().result\r\n        self.get_logger().info(f'Navigation result: {result}')\r\n    \r\n    def feedback_callback(self, feedback_msg):\r\n        \"\"\"Handle navigation feedback.\"\"\"\r\n        feedback = feedback_msg.feedback\r\n        current_pose = feedback.current_pose.pose\r\n        self.get_logger().info(\r\n            f'Current pose: ({current_pose.position.x:.2f}, '\r\n            f'{current_pose.position.y:.2f})'\r\n        )\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = NavigationNode()\r\n    \r\n    # Navigate to a goal\r\n    node.navigate_to_pose(2.0, 1.0, 0.0)\r\n    \r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,o.jsx)(e.h2,{id:"waypoint-navigation",children:"Waypoint Navigation"}),"\n",(0,o.jsx)(e.h3,{id:"following-waypoints",children:"Following Waypoints"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nWaypoint Navigation\r\n\r\nNavigate through a series of waypoints.\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom nav2_msgs.action import FollowWaypoints\r\nfrom geometry_msgs.msg import PoseStamped\r\nfrom rclpy.action import ActionClient\r\nimport math\r\n\r\nclass WaypointNavigator(Node):\r\n    def __init__(self):\r\n        super().__init__(\'waypoint_navigator\')\r\n        \r\n        self.follow_waypoints_client = ActionClient(\r\n            self,\r\n            FollowWaypoints,\r\n            \'follow_waypoints\'\r\n        )\r\n        \r\n        self.follow_waypoints_client.wait_for_server()\r\n        self.get_logger().info(\'Waypoint server ready\')\r\n    \r\n    def create_waypoint(self, x, y, theta):\r\n        """Create a waypoint pose."""\r\n        pose = PoseStamped()\r\n        pose.header.frame_id = \'map\'\r\n        pose.header.stamp = self.get_clock().now().to_msg()\r\n        pose.pose.position.x = x\r\n        pose.pose.position.y = y\r\n        pose.pose.position.z = 0.0\r\n        pose.pose.orientation.z = math.sin(theta / 2.0)\r\n        pose.pose.orientation.w = math.cos(theta / 2.0)\r\n        return pose\r\n    \r\n    def follow_waypoints(self, waypoints):\r\n        """\r\n        Follow a list of waypoints.\r\n        \r\n        Args:\r\n            waypoints: List of (x, y, theta) tuples\r\n        """\r\n        goal_msg = FollowWaypoints.Goal()\r\n        goal_msg.poses = [self.create_waypoint(x, y, theta) \r\n                         for x, y, theta in waypoints]\r\n        \r\n        self.get_logger().info(f\'Following {len(waypoints)} waypoints\')\r\n        send_goal_future = self.follow_waypoints_client.send_goal_async(goal_msg)\r\n        \r\n        rclpy.spin_until_future_complete(self, send_goal_future)\r\n        goal_handle = send_goal_future.result()\r\n        \r\n        if not goal_handle.accepted:\r\n            self.get_logger().error(\'Waypoint goal rejected\')\r\n            return\r\n        \r\n        result_future = goal_handle.get_result_async()\r\n        rclpy.spin_until_future_complete(self, result_future)\r\n        \r\n        result = result_future.result().result\r\n        self.get_logger().info(f\'Waypoint navigation complete\')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    navigator = WaypointNavigator()\r\n    \r\n    # Define waypoints\r\n    waypoints = [\r\n        (1.0, 0.0, 0.0),\r\n        (2.0, 1.0, 1.57),\r\n        (1.0, 2.0, 3.14),\r\n        (0.0, 1.0, -1.57),\r\n        (1.0, 0.0, 0.0)\r\n    ]\r\n    \r\n    navigator.follow_waypoints(waypoints)\r\n    \r\n    navigator.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,o.jsx)(e.h2,{id:"complete-navigation-example",children:"Complete Navigation Example"}),"\n",(0,o.jsx)(e.h3,{id:"full-system",children:"Full System"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nComplete Navigation System\r\n\r\nNav2 with map, localization, and path planning.\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom nav2_msgs.action import NavigateToPose\r\nfrom nav_msgs.msg import OccupancyGrid\r\nfrom geometry_msgs.msg import PoseWithCovarianceStamped\r\nfrom rclpy.action import ActionClient\r\nimport math\r\n\r\nclass CompleteNavigationSystem(Node):\r\n    def __init__(self):\r\n        super().__init__('complete_navigation')\r\n        \r\n        # Action clients\r\n        self.nav_client = ActionClient(self, NavigateToPose, 'navigate_to_pose')\r\n        \r\n        # Subscribers\r\n        self.map_sub = self.create_subscription(\r\n            OccupancyGrid,\r\n            '/map',\r\n            self.map_callback,\r\n            10\r\n        )\r\n        \r\n        self.pose_sub = self.create_subscription(\r\n            PoseWithCovarianceStamped,\r\n            '/amcl_pose',\r\n            self.pose_callback,\r\n            10\r\n        )\r\n        \r\n        # State\r\n        self.current_pose = None\r\n        self.map_received = False\r\n        \r\n        self.get_logger().info('Complete navigation system started')\r\n    \r\n    def map_callback(self, msg):\r\n        \"\"\"Handle map updates.\"\"\"\r\n        self.map_received = True\r\n        self.get_logger().info(\r\n            f'Map received: {msg.info.width}x{msg.info.height}, '\r\n            f'resolution: {msg.info.resolution}'\r\n        )\r\n    \r\n    def pose_callback(self, msg):\r\n        \"\"\"Handle pose updates.\"\"\"\r\n        self.current_pose = msg.pose.pose\r\n        pos = self.current_pose.position\r\n        self.get_logger().info(\r\n            f'Current pose: ({pos.x:.2f}, {pos.y:.2f})',\r\n            throttle_duration_sec=5.0\r\n        )\r\n    \r\n    def navigate_to(self, x, y, theta):\r\n        \"\"\"Navigate to goal.\"\"\"\r\n        if not self.map_received:\r\n            self.get_logger().warn('Map not received yet')\r\n            return\r\n        \r\n        goal = NavigateToPose.Goal()\r\n        goal.pose.header.frame_id = 'map'\r\n        goal.pose.header.stamp = self.get_clock().now().to_msg()\r\n        goal.pose.pose.position.x = x\r\n        goal.pose.pose.position.y = y\r\n        goal.pose.pose.position.z = 0.0\r\n        goal.pose.pose.orientation.z = math.sin(theta / 2.0)\r\n        goal.pose.pose.orientation.w = math.cos(theta / 2.0)\r\n        \r\n        self.nav_client.wait_for_server()\r\n        future = self.nav_client.send_goal_async(goal)\r\n        rclpy.spin_until_future_complete(self, future)\r\n        \r\n        goal_handle = future.result()\r\n        if goal_handle.accepted:\r\n            self.get_logger().info('Navigation started')\r\n        else:\r\n            self.get_logger().error('Navigation rejected')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    system = CompleteNavigationSystem()\r\n    \r\n    # Wait for map\r\n    while not system.map_received:\r\n        rclpy.spin_once(system, timeout_sec=0.1)\r\n    \r\n    # Navigate\r\n    system.navigate_to(2.0, 1.0, 0.0)\r\n    \r\n    try:\r\n        rclpy.spin(system)\r\n    except KeyboardInterrupt:\r\n        system.get_logger().info('Shutting down...')\r\n    finally:\r\n        system.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,o.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Tune costmaps"}),": Adjust inflation radius and cost scaling"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Configure planners"}),": Choose appropriate planner for your robot"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Monitor performance"}),": Check computation time"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Handle failures"}),": Implement recovery behaviors"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Test thoroughly"}),": Test in various scenarios"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"common-errors-and-solutions",children:"Common Errors and Solutions"}),"\n",(0,o.jsx)(e.h3,{id:"error-1-nav2-server-not-found",children:'Error 1: "Nav2 server not found"'}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"# Solution: Wait for server\r\nself.nav_client.wait_for_server(timeout_sec=10.0)\n"})}),"\n",(0,o.jsx)(e.h3,{id:"error-2-goal-rejected",children:'Error 2: "Goal rejected"'}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"# Solution: Check goal is in map bounds and reachable\r\n# Verify map is loaded\r\n# Check costmap configuration\n"})}),"\n",(0,o.jsx)(e.h3,{id:"error-3-robot-stuck",children:'Error 3: "Robot stuck"'}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"# Solution: \r\n# - Check recovery behaviors are enabled\r\n# - Verify obstacle layer is working\r\n# - Check for dynamic obstacles\n"})}),"\n",(0,o.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsx)(e.p,{children:"Continue learning:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"/physical-ai-textbook/docs/module-03-isaac/perception-pipeline",children:"Chapter 6: Perception Pipeline"})," - Complete autonomous system"]}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>l});var a=r(6540);const o={},t=a.createContext(o);function i(n){const e=a.useContext(t);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),a.createElement(t.Provider,{value:e},n.children)}}}]);